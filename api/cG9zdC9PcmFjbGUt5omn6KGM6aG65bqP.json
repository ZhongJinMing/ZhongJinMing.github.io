{"title":"Oracle-执行顺序","date":"2019-08-13T09:02:06.000Z","link":"post/Oracle-执行顺序","tags":["oracle"],"categories":["数据库"],"updated":"2019-08-13T09:03:43.443Z","content":"<h2 id=\"Sql的执行顺序\">Sql的执行顺序<a href=\"post/Oracle-执行顺序#Sql的执行顺序\"></a></h2><p>在oracle中select语句的基本结构如下：</p>\n<figure class=\"highlight sql\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1  [ <span class=\"keyword\">WITH</span> &lt;common_table_expression&gt;]</span><br><span class=\"line\"><span class=\"number\">2</span>  <span class=\"keyword\">SELECT</span> [<span class=\"keyword\">DISTINCT</span>] [TOP_SEPCIFICATION] &lt;select_list&gt; </span><br><span class=\"line\"><span class=\"number\">3</span>  [ <span class=\"keyword\">INTO</span> new_table ]</span><br><span class=\"line\"><span class=\"number\">4</span>  <span class=\"keyword\">FROM</span> </span><br><span class=\"line\"><span class=\"number\">5</span>  &lt;table_source| </span><br><span class=\"line\"><span class=\"number\">6</span>  &lt;table_left&gt; [JOIN_TYPE] <span class=\"keyword\">JOIN</span> &lt;table_right&gt; </span><br><span class=\"line\"><span class=\"number\">7</span>  <span class=\"keyword\">ON</span> &lt;join_condition&gt; &gt;</span><br><span class=\"line\"><span class=\"number\">8</span>  [ <span class=\"keyword\">WHERE</span> &lt;search_condition&gt; ]</span><br><span class=\"line\"><span class=\"number\">9</span>  [ <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> &lt;group_by_list&gt; ]</span><br><span class=\"line\"><span class=\"number\">10</span> [ <span class=\"keyword\">HAVING</span> &lt;search_condition&gt; ]</span><br><span class=\"line\"><span class=\"number\">11</span> [ <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> order_expression [ <span class=\"keyword\">ASC</span> | <span class=\"keyword\">DESC</span> ] ]</span><br></pre></td></tr></table></div></figure>\n\n<p>其中[]中的部分为可选内容，另外其中的<br><code>[ WITH &lt;common_table_expression&gt;]</code><br>语句是用于添加其他sql行为的，例如你可以写成<br><code>create &lt;newtablename&gt; as</code><br>来创建一个以之后的select语句检索到的内容为表内容的新表。<br>而除此之外其他部分的执行顺序如下所示： </p>\n<ol>\n<li>执行FROM语句，如果FROM之后接的是一个表则执行步骤（4），如果接的是一个JOIN语句则执行步骤（2）； </li>\n<li>执行ON语句对ON之前的JOIN语句中两个表<strong>进行裁剪</strong>（这样可以避免直接进行JOIN得到全表的笛卡尔积而找出空间和时间的浪费）； </li>\n<li>对（2）中裁剪得到的两张表进行JOIN操作，得到一张联合的表.如果之后还有其他JOIN语句则将得到的表作为table_left继续进行步骤（2）的操作，否则进行步骤（4）； </li>\n<li>执行WHERE语句，根据search_condition对之前步骤得到的表进行筛选； </li>\n<li>执行GROUP BY语句按照group_by_list对数据进行分组； </li>\n<li>执行HAVING语句对用GROUP BY 分组后的数据进行筛选，HAVING跟WHERE语句的区别在于<strong>WHERE一般用于对FROM语句得到的数据进行筛选</strong>，其中的筛选条件不能是聚合函数，<strong>而HAVING一般用于对GROUP BY语句处理后的数据进行筛选，可以使用聚合函数作为判断条件</strong>； </li>\n<li>执行SELECT语句，对查询到的字段进行组织； </li>\n<li>使用DISTINCT对结果去重； </li>\n<li>使用ORDER BY 语句对结果进行排序； </li>\n<li>使用TOP指定要顺畅前几行的数据。</li>\n</ol>\n","prev":{"title":"Oracle-基础教程","link":"post/Oracle-基础教程"},"next":{"title":"webpack学习","link":"post/webpack学习"},"plink":"http://ZhongJinMing.github.io/post/Oracle-执行顺序/","toc":[{"title":"Sql的执行顺序","id":"Sql的执行顺序","index":"1"}]}